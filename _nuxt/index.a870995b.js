import{a as S,p as y,x as $,B as L,o as f,b as k,f as d,t as D,H as b,I as A,r as F,w as M,F as T,e as U,u as j,c as H}from"./entry.ade49c21.js";import{u as I}from"./fetch.7947aace.js";import{c as O}from"./convertImageUrl.0458159c.js";import{m as w}from"./markedSetup.06b5b5a7.js";import{a as C,u as E}from"./articles.1c0f7870.js";const N=c=>(b("data-v-2f8a3c56"),c=c(),A(),c),z={class:"article"},G={class:"subtitle"},Q={class:"title"},R=N(()=>d("summary",{class:"category"},"\u7CFB\u5217\u6587\u7AE0",-1)),V=["innerHTML"],q={__name:"SeriesCard",props:["articleData"],setup(c){const r=c,i=y(""),s=y(""),{seriesLink:l}=r.articleData,_=async a=>{const n=await I(a,"$zUfBCR2vCf"),e=O.imageUrlConverter(a,n).replace(/##.*(\r?\n)?/g,"");i.value=w.marked(e)};return $(()=>r.articleData,a=>{const{seriesLink:n,lastModifyDate:u}=a;s.value=u,_(n)},{immediate:!0}),L(()=>{_(`${C}${l}`)}),(a,n)=>(f(),k("div",z,[d("div",G,"\u66F4\u65B0\u65E5\u671F\uFF1A"+D(s.value),1),d("div",Q,D(r.articleData.formatTitle),1),d("details",null,[R,d("div",{class:"article-content",innerHTML:i.value},null,8,V)])]))}},J=S(q,[["__scopeId","data-v-2f8a3c56"]]);const K={__name:"index",async setup(c){let r,i,s=F([]);const l=E();l.isQueryData||([r,i]=M(()=>l.fetchArticleData()),await r,i());const _=l.articleData,a=Object.keys(_).reduce((e,t)=>{const o=_[t].filter(p=>p.isSeries===!0);return o&&o.length!==0&&(e[t]||(e[t]=[]),e[t].push(o)),e},{}),n=Object.keys(a).reduce((e,t)=>a[t].reduce((p,v)=>{const g=v.reduce((m,x)=>{const h=x.seriesLink;return m[h]||(m[h]=[]),m[h].push(x),m},{}),B=Object.keys(g)[0];return e.push(g[B]),e},[]),[]);s.splice(0,s.length),n.forEach(e=>{s.push(e[0])});async function u(){for(const e of s){const t=await I(`${C}${e.seriesLink}`,"$NfdF4w1bf7");e.article=y(""),e.article=w.marked(t.data.value),e.formatTitle=e.seriesLink.split("/")[2]}}return L(()=>{u()}),(e,t)=>{const o=J;return f(),k("div",null,[(f(!0),k(T,null,U(j(s),(p,v)=>(f(),H(o,{key:v,articleData:p},null,8,["articleData"]))),128))])}}},ee=S(K,[["__scopeId","data-v-f4988ad1"]]);export{ee as default};
