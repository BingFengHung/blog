import{a as S,p as x,x as I,o as h,b as k,f as u,t as C,H as D,I as L,r as B,w as A,e as F,u as b,F as w,c as T}from"./entry.c49c2b4a.js";import{u as U}from"./fetch.9b01e80c.js";import{c as $}from"./convertImageUrl.0458159c.js";import{m as j}from"./markedSetup.06b5b5a7.js";import{a as H,u as O}from"./articles.2f4f3826.js";const E=r=>(D("data-v-f7ce7ccf"),r=r(),L(),r),M={class:"article"},z={class:"title"},G=E(()=>u("summary",{class:"category"},"\u7CFB\u5217\u6587\u7AE0",-1)),N=["innerHTML"],Q={__name:"SeriesCard",props:["articleData"],setup(r){const n=r,i=x(""),c=async e=>{const s=await U(e,"$zUfBCR2vCf"),d=$.imageUrlConverter(e,s).replace(/##.*(\r?\n)?/g,"");i.value=j.marked(d)};return I(()=>n.articleData,e=>{const{seriesLink:s}=e;e.formatTitle=e.seriesLink.split("/")[2],c(`${H}${s}`)},{immediate:!0}),(e,s)=>(h(),k("div",M,[u("div",z,C(n.articleData.formatTitle),1),u("details",null,[G,u("div",{class:"article-content",innerHTML:i.value},null,8,N)])]))}},R=S(Q,[["__scopeId","data-v-f7ce7ccf"]]),W={__name:"index",async setup(r){let n,i,c=B([]);const e=O();e.isQueryData||([n,i]=A(()=>e.fetchArticleData()),await n,i());const s=e.articleData,m=Object.keys(s).reduce((t,a)=>{const o=s[a].filter(l=>l.isSeries===!0);return o&&o.length!==0&&(t[a]||(t[a]=[]),t[a].push(o)),t},{}),d=Object.keys(m).reduce((t,a)=>m[a].reduce((l,p)=>{const g=p.reduce((_,y)=>{const f=y.seriesLink;return _[f]||(_[f]=[]),_[f].push(y),_},{}),v=Object.keys(g)[0];return t.push(g[v]),t},[]),[]);return c.splice(0,c.length),d.forEach(t=>{c.push(t[0])}),(t,a)=>{const o=R;return h(!0),k(w,null,F(b(c),(l,p)=>(h(),T(o,{key:p,articleData:l},null,8,["articleData"]))),128)}}};export{W as default};
